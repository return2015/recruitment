<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<ui:composition template="/templates/BasicTemplate.xhtml">


	<ui:define name="metadata">
		<f:metadata>
			<f:viewAction action="#{addUserController.initialize}" />
		</f:metadata>
	</ui:define>


	<ui:define name="content">
		<div class="title ui-widget-header ui-corner-all">
			<h:panelGrid style="margin:auto;">
		AGREGAR USUARIO
		</h:panelGrid>

		</div>

		<h:panelGrid style="margin:auto;text-align:center;">
			<p:messages id="messages"></p:messages>
		</h:panelGrid>

		<h:form id="form">


				<h:panelGrid columns="3" style="margin:auto;"
					rowClasses="panelgrid_center_row">


					<h:panelGrid>

						<p:fieldset legend="DATOS DE USUARIO">

							<h:panelGrid columns="2" rowClasses="panelgrid_center_row">
								<h:panelGrid columns="2">
									<p:outputLabel value="Nombres"></p:outputLabel>
									<p:inputText
										value="#{addUserController.userSelected.firstname}"
										style="width:100px;"></p:inputText>

									<p:outputLabel value="Apellidos"></p:outputLabel>
									<p:inputText value="#{addUserController.userSelected.lastname}"
										style="width:100px;"></p:inputText>

									<p:outputLabel value="Tipo"></p:outputLabel>
									<p:selectOneMenu value="#{addUserController.userTypeSelected}"
										required="true" requiredMessage="Debe seleccionar tipo">
										<f:selectItems value="#{addUserController.userTypes}"></f:selectItems>
									</p:selectOneMenu>
								</h:panelGrid>

								<h:panelGrid columns="2">
									<p:outputLabel value="Usuario"></p:outputLabel>
									<p:inputText value="#{addUserController.userSelected.username}"
										style="width:80px;" required="true"
										requiredMessage="Debe ingresar usuario"></p:inputText>

									<p:outputLabel value="Clave"></p:outputLabel>
									<p:inputText value="#{addUserController.userSelected.password}"
										required="true" requiredMessage="Debe ingresar clave"
										style="width:80px;"></p:inputText>

								</h:panelGrid>


							</h:panelGrid>


						</p:fieldset>

						<h:panelGrid style="margin:auto;text-align:center;">
							<p:commandButton actionListener="#{addUserController.add}"
								value="Agregar Usuario" update="@form :messages">
							</p:commandButton>
						</h:panelGrid>

					</h:panelGrid>

					

						<p:fieldset legend="AGREGAR SUB AREAS">
							<h:panelGrid>
								<h:panelGrid columns="2" style="margin:auto;">
									<p:outputLabel value="Area"></p:outputLabel>
									<p:selectOneMenu id="areas"
										value="#{addUserController.areaSelected}">
										<f:selectItem itemValue="" itemLabel="Seleccione..."></f:selectItem>
										<f:selectItems value="#{addUserController.areas}"></f:selectItems>
										<p:ajax listener="#{addUserController.searchSubAreas}"
											update=":form:subAreas :messages"></p:ajax>
									</p:selectOneMenu>
									<p:outputLabel value="Sub Area"></p:outputLabel>
									<p:selectManyMenu id="subAreas" scrollHeight="100"
										value="#{addUserController.subAreasSelected}">
										<f:selectItems value="#{addUserController.subAreas}"></f:selectItems>
									</p:selectManyMenu>

								</h:panelGrid>

								<h:panelGrid style="margin:auto;text-align:center;">
									<p:commandButton process="@this :form:areas :form:subAreas"
										actionListener="#{addUserController.addArea}"
										value="Agregar Sub Area"
										update=":form:areasTable :form:areas :form:subAreas :messages">
									</p:commandButton>
								</h:panelGrid>


							</h:panelGrid>
						</p:fieldset>

						<p:fieldset legend="SUB AREAS">
							<h:panelGrid>

								<p:dataTable id="areasTable" style="width:300px;"
									value="#{addUserController.userSelected.areas}" var="a">
									<f:facet name="header">
										<h:outputText value="Sub Areas"></h:outputText>
									</f:facet>

									<p:column headerText="Nombre">
										<h:outputText value="#{a.name}"></h:outputText>
									</p:column>

									<p:column>
										<p:commandButton process=":form:areasTable"
											update=":form:areasTable :messages" value="Eliminar"
											actionListener="#{addUserController.deleteArea(a)}">
										</p:commandButton>
									</p:column>

								</p:dataTable>

							</h:panelGrid>
						</p:fieldset>
					




				</h:panelGrid>



		</h:form>
	</ui:define>

</ui:composition>
</html>
